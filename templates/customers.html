{% extends "base.html" %}

{% block content %}
  <section class="page-section">
    <div class="section-heading">
      <h2>Customers</h2>
      <p>Maintain shipper and receiver contacts for faster order intake.</p>
    </div>

    {% if success_message %}
      <div class="banner banner-success">{{ success_message }}</div>
    {% endif %}

    <article class="card">
      <h3>Add Customer</h3>
      <form class="form-stack" method="post" action="{{ url_for('add_customer') }}">
        <label for="name">
          Name
          <input id="name" name="name" type="text" value="{{ form_data.name }}" required>
        </label>
        {% if errors.name %}
          <div class="form-error">{{ errors.name }}</div>
        {% endif %}

        <label for="zip">
          ZIP
          <input id="zip" name="zip" type="text" value="{{ form_data.zip }}" required>
        </label>
        {% if errors.zip %}
          <div class="form-error">{{ errors.zip }}</div>
        {% endif %}

        <label for="notes">
          Notes
          <textarea id="notes" name="notes" rows="3">{{ form_data.notes }}</textarea>
        </label>

        <div>
          <button class="btn" type="submit">Add Customer</button>
        </div>
      </form>
    </article>

    <article class="card">
      <h3>Customer List</h3>
      {% if customers %}
        <div class="table-wrapper">
          <table class="data-table">
            <thead>
              <tr>
                <th>Name</th>
                <th>ZIP</th>
                <th>Notes</th>
                <th>Created</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody>
              {% for customer in customers %}
                <tr>
                  <td>{{ customer.name }}</td>
                  <td>{{ customer.zip }}</td>
                  <td>{{ customer.notes or '' }}</td>
                  <td>{{ customer.created_at }}</td>
                  <td>
                    <form method="post" action="{{ url_for('delete_customer', customer_id=customer.id) }}">
                      <button class="btn btn-danger" type="submit">Delete</button>
                    </form>
                  </td>
                </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      {% else %}
        <div class="empty-state">No customers yet. Add your first customer to get started.</div>
      {% endif %}
    </article>
  </section>
{% endblock %}
